<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXTATION: Lego Disruptive Chain Block Method‚Ñ¢</title>
    <!-- Google Fonts for global typography -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

    <!--
        INLINE STYLES FOR INITIAL LOAD AND ROBUSTNESS:
        These styles are included directly in the HTML to ensure the core "Batman Computer / Star Wars Console"
        aesthetic is present immediately upon load, even before external CSS might fully parse or if you're
        viewing the raw HTML without a build process. They carefully implement the color variables and design
        specifics from the NEXTATION WEBSITE COLOUR SYSTEM AND USAGE.pdf.
        In a live Vue.js environment, many of these would typically be defined in your SCSS files, but here,
        they provide critical visual stability for the production-ready `index.html` frame.
    -->
    <style>
        /* Global Colour Variables and Design Tokens - as defined in src/assets/styles/_variables.scss */
        :root {
            /* Core backgrounds */
            --bg-main: #02030b; /* Page background */
            --bg-gradient: radial-gradient(circle at top, #1c1f3b 0%, #050716 45%, #02030b 100%);
            /* Surfaces / Cards */
            --card-bg: rgba(15, 18, 40, 0.92); /* Lesson panels */
            --card-soft-bg: rgba(18, 21, 50, 0.88); /* Tab cards and navigation buttons */
            /* Neon accents */
            --accent-cyan: #4ef2ff; /* Cyan highlight around edges */
            --accent-pink: #ff2f92; /* Magenta highlight for buttons */
            --accent-green: #4dff9b; /* Success / tab completed mark */
            --accent-yello: #ffe25f; /* Accent blended in text gradients */
            --accent-purple: #aa5dff; /* Hover glows and edges */
            /* Text and borders */
            --muted: rgba(255,255,255,0.65);
            --border-glow: rgba(120,120,255,0.45);
            /* Shadows */
            --shadow-strong: 0 0 36px rgba(130,80,255,0.6);
            --shadow-soft: 0 0 20px rgba(0,0,0,0.65);
            /* Radii and transitions */
            --radius-lg: 22px;
            --radius-md: 16px;
            --radius-sm: 10px;
            --transition-fast: 0.18s ease-out;
            --transition-med: 0.28s ease-out;

            /* Component-specific colors for tabs (Section 5 from PDF) */
            --tab-normal-bg: radial-gradient(circle at top, rgba(255,255,255,0.09), rgba(7,10,28,0.96));
            --tab-normal-border: rgba(130,140,200,0.4);
            --tab-hover-border-strong: rgba(120,120,255,0.6);
            --tab-hover-shadow: 0 0 20px rgba(120,120,255,0.35);
            --tab-active-bg: radial-gradient(circle at top, rgba(255,255,255,0.15), rgba(21,13,51,0.98));
            --tab-active-border: rgba(103,255,196,0.9);
            --tab-active-shadow: 0 0 24px rgba(79,255,204,0.6);
            --tab-completed-bg: radial-gradient(circle at top, rgba(77,255,155,0.1), rgba(10,30,15,0.96));
            --tab-completed-border: rgba(77,255,155,0.6);
            --tab-completed-shadow: 0 0 15px rgba(77,255,155,0.4);
        }

        /* Base styles for the entire page */
        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg-main);
            background-image: var(--bg-gradient);
            color: #ffffff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scroll */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header styling */
        header {
            background: linear-gradient(to right, rgba(15,18,40,0.95), rgba(6,8,26,0.95));
            padding: 20px 40px;
            border-bottom: 1px solid var(--border-glow);
            box-shadow: var(--shadow-soft);
            display: flex;
            align-items: center;
            justify-content: center; /* Center header content */
            position: relative;
            z-index: 1000; /* Ensure header is on top */
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
            max-width: 1200px; /* Constrain header width */
            width: 100%;
        }

        .teacher-orb {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at center, var(--accent-cyan) 0%, var(--accent-purple) 60%, transparent 100%);
            border-radius: 50%;
            box-shadow: 0 0 25px var(--accent-cyan), 0 0 40px var(--accent-purple);
            animation: pulse-orb 3s infinite alternate ease-in-out;
            flex-shrink: 0;
        }

        @keyframes pulse-orb {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.08); opacity: 1; }
        }

        .logo-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8em;
            color: var(--accent-cyan);
            text-shadow: 0 0 15px rgba(78,242,255,0.7);
            margin: 0;
            line-height: 1.2;
        }

        .logo-subtitle {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9em;
            color: var(--muted);
            margin: 0;
            text-shadow: 0 0 5px rgba(255,255,255,0.2);
        }

        /* Main application container */
        .main-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            gap: 30px;
            max-width: 1200px; /* Constrain main content width */
            margin: 0 auto; /* Center the container */
            width: 100%;
            box-sizing: border-box;
        }

        /* Tab navigation styling */
        .tab-navigation {
            display: flex;
            flex-wrap: wrap; /* Allow tabs to wrap on smaller screens */
            justify-content: center;
            gap: 15px;
            padding: 20px 0;
            background: var(--card-bg);
            border: 1px solid var(--border-glow);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-strong);
            width: 100%;
            max-width: 1000px; /* Limit tab navigation width */
            box-sizing: border-box;
        }

        .tab-item {
            background: var(--tab-normal-bg);
            border: 1px solid var(--tab-normal-border);
            border-radius: var(--radius-md);
            padding: 12px 20px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1em;
            color: rgba(255,255,255,0.8);
            cursor: pointer;
            transition: all var(--transition-med);
            text-align: center;
            flex-shrink: 0; /* Prevent tabs from shrinking */
            white-space: nowrap; /* Keep tab titles on one line */
        }

        .tab-item:hover {
            border-color: var(--tab-hover-border-strong);
            box-shadow: var(--tab-hover-shadow);
            color: var(--accent-cyan);
        }

        .tab-item.active {
            background: var(--tab-active-bg);
            border-color: var(--tab-active-border);
            box-shadow: var(--tab-active-shadow);
            color: var(--accent-green);
            font-weight: bold;
            cursor: default;
        }

        .tab-item.completed {
            background: var(--tab-completed-bg);
            border-color: var(--tab-completed-border);
            box-shadow: var(--tab-completed-shadow);
            color: var(--accent-green);
            position: relative;
        }

        .tab-item.completed::after {
            content: '‚úì';
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.7em;
            color: var(--accent-green);
            text-shadow: 0 0 5px rgba(77,255,155,0.7);
        }

        /* Lesson panel styling */
        .lesson-panel {
            background: var(--card-bg);
            border: 1px solid var(--border-glow);
            border-radius: var(--radius-lg);
            padding: 40px;
            box-shadow: var(--shadow-strong);
            width: 100%;
            max-width: 800px; /* Limit lesson panel width */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .lesson-panel h2 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--accent-cyan);
            font-size: 1.8em;
            margin-top: 0;
            text-shadow: 0 0 10px rgba(78,242,255,0.5);
            text-align: center;
            margin-bottom: 25px;
        }

        .lesson-panel h3 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--accent-yello);
            font-size: 1.4em;
            border-bottom: 1px solid rgba(255,226,95,0.3);
            padding-bottom: 10px;
            margin-top: 30px;
        }

        .lesson-panel p {
            color: rgba(255,255,255,0.9);
            line-height: 1.6;
            margin-bottom: 15px;
            text-align: justify;
        }

        .lesson-panel em {
            color: var(--accent-pink);
            text-shadow: 0 0 5px rgba(255,47,146,0.5);
            font-style: normal; /* Override default italic for better readability with neon glow */
        }

        .lesson-panel strong {
            color: var(--accent-cyan);
            text-shadow: 0 0 5px rgba(78,242,255,0.5);
        }

        .lesson-panel .separator {
            width: 80%;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--border-glow), transparent);
            margin: 30px auto;
            opacity: 0.5;
        }

        /* Specific section styling */
        .section-box {
            background: rgba(18, 21, 50, 0.88);
            border: 1px solid rgba(120,120,255,0.45);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
        }

        .section-box.error {
            background: rgba(255, 47, 146, 0.1);
            border: 1px solid var(--accent-pink);
        }

        .section-box.success {
            background: rgba(77, 255, 155, 0.1);
            border: 1px solid var(--accent-green);
        }

        .section-box p.highlight {
            font-weight: bold;
            color: var(--accent-green);
            text-shadow: 0 0 5px #4dff9b;
        }

        .section-box input[type="text"], .section-box textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 10px;
            background: rgba(2,6,32,0.95);
            border: 1px solid var(--accent-purple);
            border-radius: var(--radius-sm);
            color: #ffffff;
            font-size: 1em;
            resize: vertical;
            min-height: 40px;
            box-sizing: border-box;
        }

        .section-box button {
            background: linear-gradient(45deg, var(--accent-pink), var(--accent-purple));
            border: none;
            border-radius: var(--radius-sm);
            padding: 10px 20px;
            color: #ffffff;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all var(--transition-fast);
            box-shadow: 0 0 10px rgba(255,47,146,0.4);
        }

        .section-box button:hover {
            opacity: 0.9;
            box-shadow: 0 0 15px rgba(255,47,146,0.6);
            transform: translateY(-2px);
        }

        .section-box .options label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
            padding: 8px;
            border: 1px solid rgba(120,120,255,0.2);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .section-box .options label:hover {
            background: rgba(120,120,255,0.1);
            border-color: var(--accent-purple);
        }

        .section-box .options input[type="radio"] {
            margin-right: 10px;
        }

        .section-box .options label.correct {
            background: rgba(77, 255, 155, 0.2);
            border-color: var(--accent-green);
            box-shadow: 0 0 8px rgba(77, 255, 155, 0.4);
        }

        .section-box .options label.incorrect {
            background: rgba(255, 47, 146, 0.2);
            border-color: var(--accent-pink);
            box-shadow: 0 0 8px rgba(255, 47, 146, 0.4);
        }

        /* Footer styling */
        footer {
            background: linear-gradient(to right, rgba(6,8,26,0.95), rgba(15,18,40,0.95));
            padding: 20px 40px;
            text-align: center;
            color: var(--muted); /* Muted text (Section 13 from PDF) */
            font-size: 0.85em;
            margin-top: auto; /* Pushes footer to the bottom */
            border-top: 1px solid rgba(120,120,255,0.1);
            width: 100%;
            box-sizing: border-box;
            word-spacing: 0.05em;
        }

        footer .highlight-name {
            color: var(--accent-cyan); /* Brand accent (Section 13 from PDF) */
            font-weight: bold;
            text-shadow: 0 0 5px rgba(78,242,255,0.5);
        }

        footer span {
            color: var(--accent-pink); /* Heart color, using accent-pink for consistency */
        }

        /* Responsive adjustments as per design (Section 14 from PDF) */
        @media (max-width: 768px) {
            header, footer {
                padding: 15px 20px;
            }

            .main-container {
                padding: 20px;
                gap: 20px;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .logo-title {
                font-size: 1.4em;
            }

            .logo-subtitle {
                font-size: 0.8em;
            }

            .tab-navigation {
                padding: 15px 0;
                gap: 10px;
            }

            .tab-item {
                padding: 10px 15px;
                font-size: 0.9em;
            }

            .lesson-panel {
                padding: 25px;
            }

            .lesson-panel h2 {
                font-size: 1.5em;
            }

            .lesson-panel p {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER SECTION -->
    <header>
        <div class="header-content">
            <div class="teacher-orb"></div>
            <div>
                <h1 class="logo-title">Daby's Lego Disruptive Chain Block Method‚Ñ¢</h1>
                <p class="logo-subtitle">Thinking simulator for English mastery</p>
            </div>
        </div>
    </header>

    <!-- MAIN APPLICATION CONTAINER -->
    <div class="main-container">
        <!-- TAB NAVIGATION STRIP -->
        <nav class="tab-navigation" id="tab-navigation">
            <!-- Tabs will be dynamically generated here by JavaScript -->
        </nav>

        <!-- LESSON PANEL - This is where dynamic content will be loaded -->
        <section class="lesson-panel" id="app">
            <h2 id="lesson-title">Welcome to NEXTATION: IMMERSIVE LEARNING PLATFORM!</h2>
            <div id="lesson-content">
                <p>
                    üö® Esta √© a plataforma imersiva que vai mudar a sua forma de se comunicar em ingl√™s. Aqui, voc√™ n√£o vai apenas **aprender**; voc√™ vai **cair de cabe√ßa** nas situa√ß√µes reais e **pensar como um nativo** antes mesmo de falar.
                </p>
                <p>
                    üß† Esque√ßa as aulas chatas de gram√°tica! Focamos em te ensinar o **julgamento**, o **timing**, o **tom** e a **escolha** de palavras, exatamente como um nativo faz. Cada "tab" (situa√ß√£o) √© um novo desafio da vida real.
                </p>
                <p>
                    Clique em uma das situa√ß√µes acima para come√ßar sua jornada e transformar seu ingl√™s!
                </p>
                <p style="margin-top: 25px; font-weight: bold; color: var(--accent-green); text-shadow: 0 0 8px #4dff9b;">
                    Let's make you think in English, not translate!
                </p>
                <div class="separator"></div>
                <p style="font-size: 0.9em; text-align: center; color: var(--muted);">
                    *(The specific content for each lesson will load here dynamically when you click a tab.)*
                </p>
            </div>
        </section>
    </div>

    <!-- FOOTER SECTION -->
    <footer>
        <p>&copy; 2026 Crafted with <span>&#10084;</span> by <span class="highlight-name">Daby</span>. All rights reserved.</p>
        <p>Powered by the üß† Lego Disruptive Chain Block Method‚Ñ¢.</p>
    </footer>

    <!--
        JavaScript for dynamic tab content and interaction.
        In a real Vue.js app, this would be in main.js and use Vue's reactivity.
        For a self-contained HTML, we're embedding the logic here.
    -->
    <script>
        // Data structure for all 10 lessons
        const lessons = [
            {
                id: 'situation-1',
                tabTitle: 'Situation 1',
                expression: 'What can I get you?',
                sections: {
                    brazilianThinking: `
                        <p>Voc√™ est√° no balc√£o de uma loja, no seu escrit√≥rio recebendo um cliente, ou talvez num evento, sendo o anfitri√£o. A pessoa est√° ali, olhando, talvez um pouco perdida. A gente, no Brasil, costuma ser direto, n√©? <em style="color: var(--accent-pink);">"Posso ajudar?"</em> ou <em style="color: var(--accent-pink);">"O que voc√™ precisa?"</em>, talvez at√© um <em style="color: var(--accent-pink);">"O que o senhor deseja?"</em>. A inten√ß√£o √© clara: oferecer servi√ßo, fazer a pessoa se sentir √† vontade, ou simplesmente iniciar o atendimento. √â uma abordagem que busca efici√™ncia e acolhimento. Mas, no ingl√™s, essa "efici√™ncia" pode soar um pouco... diferente.</p>
                    `,
                    nativeThinking: `
                        <p>When serving or helping, natives offer politely. It opens the conversation, showing readiness to assist while being respectful. It's an invitation, not a demand.</p>
                    `,
                    commonMistakes: `
                        <div class="section-box error">
                            <p style="font-weight: bold; color: var(--accent-pink); font-size: 1.1em; margin-bottom: 5px;">1. "What do you want?"</p>
                            <p style="color: rgba(255,255,255,0.9); line-height: 1.4;">
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Why it sounds weird:</strong> This is too direct, even aggressive. It can sound demanding or impatient, like you're annoyed they haven't spoken yet. Very <em style="color: var(--accent-pink);">unprofessional</em>.
                                <br>
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Por que soa estranho:</strong> √â muito direto, at√© agressivo. Pode soar como uma exig√™ncia ou impaci√™ncia, como se voc√™ estivesse irritado por a pessoa ainda n√£o ter falado. Extremamente <em style="color: var(--accent-pink);">n√£o profissional.</em>
                            </p>
                        </div>
                        <div class="section-box error">
                            <p style="font-weight: bold; color: var(--accent-pink); font-size: 1.1em; margin-bottom: 5px;">2. "Can I help you?"</p>
                            <p style="color: rgba(255,255,255,0.9); line-height: 1.4;">
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Why it sounds weak:</strong> While grammatically correct, it's often used when someone *looks* like they need help, not as a general greeting or offer of service where you're *expecting* an order. It can imply a problem. It's not the best default for starting service.
                                <br>
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Por que soa fraco:</strong> Embora gramaticalmente correto, √© frequentemente usado quando algu√©m *parece* precisar de ajuda, n√£o como uma sauda√ß√£o geral ou oferta de servi√ßo onde voc√™ *espera* um pedido. Pode implicar um problema. N√£o √© o melhor padr√£o para iniciar um atendimento.
                            </p>
                        </div>
                    `,
                    synonyms: `
                        <div class="section-box">
                            <p style="font-weight: bold; color: var(--accent-cyan); font-size: 1.1em; margin-bottom: 5px;">Other Common Synonyms / Alternatives:</p>
                            <ul style="list-style: none; padding: 0;">
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"How can I help you?"</strong> (More formal, problem-solving context)</li>
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"Are you being helped?"</strong> (When approaching someone who might already be assisted)</li>
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"What can I do for you?"</strong> (Similar to "What can I get you?", slightly broader)</li>
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"May I help you?"</strong> (Polite, slightly more formal than "Can I help you?")</li>
                            </ul>
                        </div>
                    `,
                    scenarioQuestion: {
                        question: `
                            <p>Imagine voc√™ √© um gar√ßom em um restaurante elegante e um novo cliente acaba de se sentar √† mesa. Voc√™ quer se aproximar para pegar o pedido. Qual a melhor frase para iniciar o atendimento?</p>
                        `,
                        options: [
                            { text: 'A) "What do you want?"', isCorrect: false },
                            { text: 'B) "Can I help you?"', isCorrect: false },
                            { text: 'C) "What can I get you?"', isCorrect: true }
                        ],
                        explanation: `
                            <p style="color: rgba(255,255,255,0.9); font-size: 0.9em; margin-top: 10px;">
                                <strong style="color: var(--accent-yello);">Por qu√™?</strong> "What can I get you?" √© a express√£o mais natural e acolhedora para iniciar um atendimento em um restaurante ou bar. Ela convida o cliente a fazer um pedido diretamente, sem soar agressiva ou como se estivesse resolvendo um problema.
                            </p>
                        `
                    }
                }
            },
            {
                id: 'situation-2',
                tabTitle: 'Situation 2',
                expression: 'I will have...',
                sections: {
                    brazilianThinking: `
                        <p>üö® Imagine voc√™ est√° em um restaurante chique, ou talvez num bar movimentado. O gar√ßom vem te atender e voc√™ precisa fazer seu pedido. Essa situa√ß√£o √© <strong>super comum</strong> e, no Brasil, a gente tem um jeito bem direto de falar. Mas em ingl√™s, a escolha das palavras pode mudar tudo ‚Äì da sua imagem de profissional ao tom da sua conversa.</p>
                        <p>üß† Aqui, vamos te ensinar a pensar como um nativo antes de abrir a boca. Qual a sua inten√ß√£o real? Cortesia? Efici√™ncia? O ambiente √© formal ou informal? Cada detalhe importa.</p>
                        <p>Voc√™ vai aprender a usar as express√µes certas para que seu pedido saia <strong>natural</strong> e <strong>confiante</strong>, n√£o traduzido e roboticamente. Esque√ßa o "I want"! Isso pode soar como uma crian√ßa pedindo algo. Vamos te dar as ferramentas para voc√™ se expressar com a fluidez de um nativo, focando na inten√ß√£o e no impacto da sua fala.</p>
                    `,
                    nativeThinking: `
                        <p>When ordering food or drinks, natives use polite, indirect phrasing. It's about expressing a choice, not a demand. This shows respect and good manners.</p>
                    `,
                    commonMistakes: `
                        <div class="section-box error">
                            <p style="font-weight: bold; color: var(--accent-pink); font-size: 1.1em; margin-bottom: 5px;">1. "I want..."</p>
                            <p style="color: rgba(255,255,255,0.9); line-height: 1.4;">
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Why it sounds weird:</strong> This is too direct and can sound demanding or childish. It lacks politeness and can be perceived as rude in a service setting.
                                <br>
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Por que soa estranho:</strong> √â muito direto e pode soar exigente ou infantil. Falta polidez e pode ser percebido como rude em um ambiente de servi√ßo.
                            </p>
                        </div>
                        <div class="section-box error">
                            <p style="font-weight: bold; color: var(--accent-pink); font-size: 1.1em; margin-bottom: 5px;">2. "Give me..."</p>
                            <p style="color: rgba(255,255,255,0.9); line-height: 1.4;">
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Why it sounds weak:</strong> This is an imperative and is extremely rude in almost any context when ordering. It's a command, not a request.
                                <br>
                                <strong style="color: var(--accent-yello); text-shadow: 0 0 5px rgba(255,226,95,0.5);">Por que soa fraco:</strong> Isso √© um imperativo e √© extremamente rude em quase qualquer contexto ao fazer um pedido. √â uma ordem, n√£o um pedido.
                            </p>
                        </div>
                    `,
                    synonyms: `
                        <div class="section-box">
                            <p style="font-weight: bold; color: var(--accent-cyan); font-size: 1.1em; margin-bottom: 5px;">Other Common Synonyms / Alternatives:</p>
                            <ul style="list-style: none; padding: 0;">
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"I'll get..."</strong> (Very common, casual, and polite)</li>
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"Could I get..."</strong> (Polite, slightly more formal, good for adding items)</li>
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"May I have..."</strong> (More formal, often used in higher-end establishments)</li>
                                <li style="margin-bottom: 8px; color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-green);">"I'd like..."</strong> (Polite and versatile)</li>
                            </ul>
                        </div>
                    `,
                    scenarioQuestion: {
                        question: `
                            <p>Voc√™ est√° em um caf√© e o barista pergunta o que voc√™ gostaria. Voc√™ decidiu pedir um cappuccino. Qual a forma mais natural e educada de fazer seu pedido?</p>
                        `,
                        options: [
                            { text: 'A) "I want a cappuccino."', isCorrect: false },
                            { text: 'B) "Give me a cappuccino."', isCorrect: false },
                            { text: 'C) "I\'ll have a cappuccino, please."', isCorrect: true }
                        ],
                        explanation: `
                            <p style="color: rgba(255,255,255,0.9); font-size: 0.9em; margin-top: 10px;">
                                <strong style="color: var(--accent-yello);">Por qu√™?</strong> "I'll have a cappuccino, please" √© a forma mais comum e educada de fazer um pedido em um caf√©. O "I'll have" √© uma contra√ß√£o de "I will have" e soa natural, enquanto "please" adiciona a cortesia esperada.
                            </p>
                        `
                    }
                }
            },
            {
                id: 'situation-3',
                tabTitle: 'Situation 3',
                expression: 'Can you hear me?',
                sections: {
                    brazilianThinking: `<p>Voc√™ est√° numa chamada de v√≠deo ou √°udio e a conex√£o est√° ruim. A primeira coisa que vem √† mente √© verificar se a outra pessoa est√° te ouvindo. No Brasil, a gente pergunta direto: <em style="color: var(--accent-pink);">"Voc√™ me ouve?"</em> ou <em style="color: var(--accent-pink);">"Est√° me ouvindo?"</em>. √â uma checagem r√°pida e funcional.</p>`,
                    nativeThinking: `<p>When checking audio, natives use clear, concise phrases. They aim to confirm audibility without sounding accusatory or demanding. Politeness is key, even in technical issues.</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "Are you listening to me?"</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> This implies the person is *choosing* not to listen, not that there's a technical issue. It's accusatory.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"Am I coming through clearly?"</li><li style="color: var(--accent-green);">"Can you hear me okay?"</li><li style="color: var(--accent-green);">"Is my audio working?"</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Voc√™ est√° em uma confer√™ncia online e percebe que sua voz pode n√£o estar chegando bem. Como voc√™ pergunta aos participantes se eles est√£o te ouvindo?</p>`,
                        options: [
                            { text: 'A) "Are you listening to me?"', isCorrect: false },
                            { text: 'B) "Can you hear me?"', isCorrect: true },
                            { text: 'C) "Do you hear?"', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "Can you hear me?" √© a forma mais direta e natural para verificar a audibilidade em uma chamada.</p>`
                    }
                }
            },
            {
                id: 'situation-4',
                tabTitle: 'Situation 4',
                expression: 'Loud and clear',
                sections: {
                    brazilianThinking: `<p>Algu√©m te pergunta se voc√™ est√° ouvindo bem. No Brasil, a gente responde com <em style="color: var(--accent-pink);">"Alto e claro!"</em> ou <em style="color: var(--accent-pink);">"Perfeito!"</em>. √â uma confirma√ß√£o enf√°tica de que a comunica√ß√£o est√° √≥tima, sem ru√≠dos ou problemas.</p>`,
                    nativeThinking: `<p>Natives use this phrase to confirm excellent audio quality. It's a strong, positive affirmation that communication is perfect, without any issues.</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "Yes, I hear you very good."</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> "Very good" is grammatically incorrect here; it should be "very well." "Loud and clear" is more idiomatic and concise.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"Crystal clear!"</li><li style="color: var(--accent-green);">"Perfectly!"</li><li style="color: var(--accent-green);">"I can hear you perfectly."</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Seu colega pergunta: "Can you hear me okay?" e a qualidade do √°udio est√° excelente. Qual a melhor resposta?</p>`,
                        options: [
                            { text: 'A) "Yes, very good."', isCorrect: false },
                            { text: 'B) "Loud and clear!"', isCorrect: true },
                            { text: 'C) "I hear you well."', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "Loud and clear!" √© a resposta idiom√°tica e mais natural para confirmar que o √°udio est√° perfeito.</p>`
                    }
                }
            },
            {
                id: 'situation-5',
                tabTitle: 'Situation 5',
                expression: 'Fancy a drink?',
                sections: {
                    brazilianThinking: `<p>Voc√™ est√° com amigos ou colegas e quer oferecer algo para beber. No Brasil, a gente pergunta: <em style="color: var(--accent-pink);">"Quer uma bebida?"</em> ou <em style="color: var(--accent-pink);">"Topa uma bebida?"</em>. √â um convite direto e informal para socializar e relaxar.</p>`,
                    nativeThinking: `<p>Natives use "fancy a drink?" as a casual, friendly invitation. It's less direct than "do you want," implying a relaxed social setting and an open offer.</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "Do you want a drink?"</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> While grammatically correct, it can sound a bit blunt or less inviting than "fancy a drink?" in a casual social context.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"Would you like a drink?"</li><li style="color: var(--accent-green);">"How about a drink?"</li><li style="color: var(--accent-green);">"Can I get you something to drink?"</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Voc√™ est√° em casa com um amigo e quer oferecer uma bebida. Qual a forma mais casual e amig√°vel de perguntar?</p>`,
                        options: [
                            { text: 'A) "Do you want a drink?"', isCorrect: false },
                            { text: 'B) "Fancy a drink?"', isCorrect: true },
                            { text: 'C) "I offer you a drink."', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "Fancy a drink?" √© uma express√£o brit√¢nica muito comum e amig√°vel para oferecer uma bebida em um contexto informal.</p>`
                    }
                }
            },
            {
                id: 'situation-6',
                tabTitle: 'Situation 6',
                expression: 'Fancy something to eat?',
                sections: {
                    brazilianThinking: `<p>Voc√™ est√° com algu√©m e percebe que j√° √© hora de comer ou quer oferecer um lanche. No Brasil, a gente pergunta: <em style="color: var(--accent-pink);">"Quer comer alguma coisa?"</em> ou <em style="color: var(--accent-pink);">"Topa um lanche?"</em>. √â um convite informal para compartilhar uma refei√ß√£o ou um snack.</p>`,
                    nativeThinking: `<p>Similar to "fancy a drink?", this is a casual, friendly way to offer food. It's an open invitation, implying a relaxed setting, and is less direct than "do you want to eat?".</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "Do you want to eat something?"</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> Grammatically fine, but "fancy something to eat?" is more idiomatic and natural in casual British English, sounding more inviting.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"Are you hungry?"</li><li style="color: var(--accent-green);">"Would you like something to eat?"</li><li style="color: var(--accent-green);">"How about some food?"</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Voc√™ est√° em casa com um amigo depois de um longo dia e quer oferecer algo para comer. Qual a forma mais casual e amig√°vel de perguntar?</p>`,
                        options: [
                            { text: 'A) "Do you want to eat something?"', isCorrect: false },
                            { text: 'B) "Fancy something to eat?"', isCorrect: true },
                            { text: 'C) "I will make food for you."', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "Fancy something to eat?" √© uma express√£o brit√¢nica muito comum e amig√°vel para oferecer comida em um contexto informal.</p>`
                    }
                }
            },
            {
                id: 'situation-7',
                tabTitle: 'Situation 7',
                expression: 'After you',
                sections: {
                    brazilianThinking: `<p>Voc√™ est√° em uma porta, elevador ou em um corredor estreito e quer ceder a passagem para algu√©m. No Brasil, a gente diz <em style="color: var(--accent-pink);">"Pode ir!"</em>, <em style="color: var(--accent-pink);">"Depois de voc√™!"</em> ou simplesmente gesticula. √â um gesto de cortesia e respeito.</p>`,
                    nativeThinking: `<p>Natives use "after you" as a polite way to offer someone to go first. It's a common courtesy, showing respect and deference in shared spaces.</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "Go first!"</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> This is too direct and can sound like a command rather than a polite offer. It lacks the nuance of courtesy.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"Please, go ahead."</li><li style="color: var(--accent-green);">"You first." (More casual)</li><li style="color: var(--accent-green);">"Allow me." (If opening a door for them)</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Voc√™ e um colega chegam √† porta de uma sala ao mesmo tempo. Voc√™ quer que ele entre primeiro. Qual a express√£o mais educada?</p>`,
                        options: [
                            { text: 'A) "Go first!"', isCorrect: false },
                            { text: 'B) "After you."', isCorrect: true },
                            { text: 'C) "You can pass."', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "After you" √© a express√£o idiom√°tica padr√£o para ceder a passagem de forma educada.</p>`
                    }
                }
            },
            {
                id: 'situation-8',
                tabTitle: 'Situation 8',
                expression: 'I am running late',
                sections: {
                    brazilianThinking: `<p>Voc√™ est√° atrasado para um compromisso e precisa avisar. No Brasil, a gente diz <em style="color: var(--accent-pink);">"Estou atrasado"</em> ou <em style="color: var(--accent-pink);">"Vou me atrasar"</em>. √â uma comunica√ß√£o direta da sua situa√ß√£o para gerenciar expectativas.</p>`,
                    nativeThinking: `<p>Natives use "I'm running late" to politely inform others of a delay. It's a common, concise phrase that conveys the situation without needing lengthy explanations.</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "I am delayed."</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> While understandable, "delayed" is usually used for inanimate objects (flights, trains). For people, "running late" is the natural idiom.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"I'm going to be a bit late."</li><li style="color: var(--accent-green);">"I'm behind schedule."</li><li style="color: var(--accent-green);">"I'll be there shortly." (If only a small delay)</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Voc√™ est√° a caminho de uma reuni√£o importante e percebe que vai chegar 10 minutos atrasado. Como voc√™ avisa seu chefe por mensagem?</p>`,
                        options: [
                            { text: 'A) "I am delayed for the meeting."', isCorrect: false },
                            { text: 'B) "I am running late for the meeting."', isCorrect: true },
                            { text: 'C) "I will arrive late."', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "I am running late" √© a express√£o mais natural e profissional para informar um atraso pessoal.</p>`
                    }
                }
            },
            {
                id: 'situation-9',
                tabTitle: 'Situation 9',
                expression: 'How about I make some tea?',
                sections: {
                    brazilianThinking: `<p>Voc√™ est√° em casa ou no trabalho e quer oferecer para fazer um ch√° (ou caf√©) para algu√©m. No Brasil, a gente pergunta: <em style="color: var(--accent-pink);">"Que tal eu fazer um ch√°?"</em> ou <em style="color: var(--accent-pink);">"Posso fazer um ch√° para voc√™?"</em>. √â uma oferta de hospitalidade e cuidado.</p>`,
                    nativeThinking: `<p>Natives use "how about I make some tea?" as a polite, indirect offer of hospitality. It's an inviting suggestion, not a direct question, common in home or office settings.</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "Do you want me to make tea?"</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> Grammatically correct, but "how about I make some tea?" is a softer, more natural, and inviting way to offer, especially in British English.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"Can I get you some tea?"</li><li style="color: var(--accent-green);">"Would you like some tea?"</li><li style="color: var(--accent-green);">"I'm making tea, would you like some?"</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Um colega parece cansado no escrit√≥rio. Voc√™ quer oferecer para fazer um ch√° para ele. Qual a melhor forma de oferecer?</p>`,
                        options: [
                            { text: 'A) "Do you want me to make tea?"', isCorrect: false },
                            { text: 'B) "How about I make some tea?"', isCorrect: true },
                            { text: 'C) "I will make tea for you."', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "How about I make some tea?" √© uma oferta gentil e comum, que soa mais natural do que uma pergunta direta.</p>`
                    }
                }
            },
            {
                id: 'situation-10',
                tabTitle: 'Situation 10',
                expression: 'I commute to work by...',
                sections: {
                    brazilianThinking: `<p>Algu√©m pergunta como voc√™ vai para o trabalho. No Brasil, a gente diz <em style="color: var(--accent-pink);">"Eu vou para o trabalho de carro/√¥nibus/metr√¥"</em>. √â uma resposta direta sobre o meio de transporte utilizado no dia a dia.</p>`,
                    nativeThinking: `<p>Natives use "I commute to work by..." to describe their regular travel method. "Commute" implies a regular journey, and "by" specifies the mode of transport.</p>`,
                    commonMistakes: `
                        <div class="section-box error"><p style="font-weight: bold; color: var(--accent-pink);">1. "I go to work with car."</p><p style="color: rgba(255,255,255,0.9);"><strong style="color: var(--accent-yello);">Why it sounds weird:</strong> "With car" is incorrect; it should be "by car." Also, "commute" is the more natural verb for regular travel to work.</p></div>
                    `,
                    synonyms: `
                        <div class="section-box"><p style="font-weight: bold; color: var(--accent-cyan);">Other Common Synonyms / Alternatives:</p><ul><li style="color: var(--accent-green);">"I take the bus/train/car to work."</li><li style="color: var(--accent-green);">"My commute is by..."</li><li style="color: var(--accent-green);">"I drive/walk/cycle to work."</li></ul></div>
                    `,
                    scenarioQuestion: {
                        question: `<p>Um novo colega de trabalho pergunta: "How do you get to work?" Como voc√™ responde que vai de metr√¥?</p>`,
                        options: [
                            { text: 'A) "I go to work with subway."', isCorrect: false },
                            { text: 'B) "I commute to work by subway."', isCorrect: true },
                            { text: 'C) "I take subway to work."', isCorrect: false }
                        ],
                        explanation: `<p><strong style="color: var(--accent-yello);">Por qu√™?</strong> "I commute to work by subway" √© a forma mais natural e idiom√°tica. "By" √© a preposi√ß√£o correta para meios de transporte.</p>`
                    }
                }
            }
        ];

        let currentLessonIndex = -1; // -1 for welcome screen
        let activeTabElement = null;

        function renderLesson(lessonIndex) {
            const lesson = lessons[lessonIndex];
            const lessonContentDiv = document.getElementById('lesson-content');
            const lessonTitleH2 = document.getElementById('lesson-title');

            lessonTitleH2.textContent = lesson.tabTitle + ': ' + lesson.expression;
            lessonContentDiv.innerHTML = ''; // Clear previous content

            // Section 1: Brazilian Thinking
            lessonContentDiv.innerHTML += `
                <h2 style="font-family: 'Space Grotesk', sans-serif; color: var(--accent-cyan); font-size: 1.8em; margin-top: 0; text-shadow: 0 0 10px rgba(78,242,255,0.5); text-align: center; margin-bottom: 25px;">
                    üîπ SECTION 1 ‚Äî BRAZILIAN THINKING (PORTUGUESE) üáßüá∑
                </h2>
                <div class="section-box">
                    ${lesson.sections.brazilianThinking}
                </div>
                <div class="separator"></div>
            `;

            // Section 2: Native Thinking
            lessonContentDiv.innerHTML += `
                <h2 style="font-family: 'Space Grotesk', sans-serif; color: var(--accent-cyan); font-size: 1.8em; margin-top: 0; text-shadow: 0 0 10px rgba(78,242,255,0.5); text-align: center; margin-bottom: 25px;">
                    üîπ SECTION 2 ‚Äî NATIVE THINKING (ENGLISH) üá∫üá∏üá¨üáß
                </h2>
                <div class="section-box">
                    ${lesson.sections.nativeThinking}
                </div>
                <div class="separator"></div>
            `;

            // Section 3: Student Guess
            lessonContentDiv.innerHTML += `
                <h2 style="font-family: 'Space Grotesk', sans-serif; color: var(--accent-cyan); font-size: 1.8em; margin-top: 0; text-shadow: 0 0 10px rgba(78,242,255,0.5); text-align: center; margin-bottom: 25px;">
                    üîπ SECTION 3 ‚Äî YOUR TURN TO GUESS! ‚úçÔ∏è
                </h2>
                <div class="section-box">
                    <p>Baseado no que voc√™ aprendeu, como voc√™ diria a express√£o principal desta situa√ß√£o em ingl√™s?</p>
                    <textarea id="student-guess-s3" placeholder="Escreva sua resposta aqui..."></textarea>
                    <button onclick="revealSections(3)">REVEAL ANSWER & MISTAKES</button>
                </div>
                <div class="separator"></div>
            `;

            // Sections 4, 5, 6, 7 (initially hidden)
            lessonContentDiv.innerHTML += `
                <div id="hidden-sections-4-7" style="display: none;">
                    <!-- Section 4: Highlight Answer + Common Mistakes -->
                    <h2 style="font-family: 'Space Grotesk', sans-serif; color: var(--accent-cyan); font-size: 1.8em; margin-top: 0; text-shadow: 0 0 10px rgba(78,242,255,0.5); text-align: center; margin-bottom: 25px;">
                        üîπ SECTION 4 ‚Äî NATIVE EXPRESSION & COMMON MISTAKES üö®
                    </h2>
                    <div class="section-box success">
                        <p class="highlight">The Native Expression: "${lesson.expression}"</p>
                    </div>
                    ${lesson.sections.commonMistakes}
                    <div class="separator"></div>

                    <!-- Section 5: Other Common Synonyms -->
                    <h2 style="font-family: 'Space Grotesk', sans-serif; color: var(--accent-cyan); font-size: 1.8em; margin-top: 0; text-shadow: 0 0 10px rgba(78,242,255,0.5); text-align: center; margin-bottom: 25px;">
                        üîπ SECTION 5 ‚Äî OTHER COMMON SYNONYMS üí°
                    </h2>
                    ${lesson.sections.synonyms}
                    <div class="separator"></div>

                    <!-- Section 6: Student Write Again -->
                    <h2 style="font-family: 'Space Grotesk', sans-serif; color: var(--accent-cyan); font-size: 1.8em; margin-top: 0; text-shadow: 0 0 10px rgba(78,242,255,0.5); text-align: center; margin-bottom: 25px;">
                        üîπ SECTION 6 ‚Äî WRITE IT AGAIN! ‚úçÔ∏è
                    </h2>
                    <div class="section-box">
                        <p>Agora que voc√™ viu a resposta e os sin√¥nimos, escreva a express√£o principal novamente, ou uma das alternativas que voc√™ aprendeu:</p>
                        <textarea id="student-guess-s6" placeholder="Escreva sua resposta aqui..."></textarea>
                        <button onclick="revealSections(6)">CHECK YOUR UNDERSTANDING</button>
                    </div>
                    <div class="separator"></div>

                    <!-- Section 7: Scenario-based Question (initially hidden within this block) -->
                    <div id="hidden-section-7" style="display: none;">
                        <h2 style="font-family: 'Space Grotesk', sans-serif; color: var(--accent-cyan); font-size: 1.8em; margin-top: 0; text-shadow: 0 0 10px rgba(78,242,255,0.5); text-align: center; margin-bottom: 25px;">
                            üîπ SECTION 7 ‚Äî APPLY YOUR KNOWLEDGE ‚úÖ
                        </h2>
                        <div class="section-box">
                            ${lesson.sections.scenarioQuestion.question}
                            <div class="options" id="scenario-options">
                                ${lesson.sections.scenarioQuestion.options.map((option, idx) => `
                                    <label>
                                        <input type="radio" name="scenario-q" value="${idx}" data-correct="${option.isCorrect}">
                                        ${option.text}
                                    </label>
                                `).join('')}
                            </div>
                            <button onclick="checkScenarioAnswer()">CHECK ANSWER</button>
                            <div id="scenario-explanation" style="margin-top: 15px; display: none;">
                                ${lesson.sections.scenarioQuestion.explanation}
                            </div>
                        </div>
                        <div class="separator"></div>
                    </div>
                </div>
            `;
        }

        function revealSections(triggerSection) {
            if (triggerSection === 3) {
                document.getElementById('hidden-sections-4-7').style.display = 'block';
            } else if (triggerSection === 6) {
                document.getElementById('hidden-section-7').style.display = 'block';
            }
        }

        function checkScenarioAnswer() {
            const optionsDiv = document.getElementById('scenario-options');
            const explanationDiv = document.getElementById('scenario-explanation');
            const radios = optionsDiv.querySelectorAll('input[type="radio"]');
            let selectedCorrect = false;

            radios.forEach(radio => {
                const label = radio.closest('label');
                label.classList.remove('correct', 'incorrect');
                if (radio.checked) {
                    if (radio.dataset.correct === 'true') {
                        label.classList.add('correct');
                        selectedCorrect = true;
                    } else {
                        label.classList.add('incorrect');
                    }
                }
            });

            explanationDiv.style.display = 'block';

            if (selectedCorrect && currentLessonIndex !== -1) {
                // Mark tab as completed
                const tabElement = document.querySelector(`.tab-item[data-lesson-id="${lessons[currentLessonIndex].id}"]`);
                if (tabElement && !tabElement.classList.contains('completed')) {
                    tabElement.classList.add('completed');
                }
            }
        }

        function setActiveTab(tabElement, lessonIndex) {
            if (activeTabElement) {
                activeTabElement.classList.remove('active');
            }
            tabElement.classList.add('active');
            activeTabElement = tabElement;
            currentLessonIndex = lessonIndex;
            renderLesson(lessonIndex);
        }

        // Initialize tabs
        document.addEventListener('DOMContentLoaded', () => {
            const tabNavigation = document.getElementById('tab-navigation');
            lessons.forEach((lesson, index) => {
                const tabItem = document.createElement('div');
                tabItem.classList.add('tab-item');
                tabItem.textContent = lesson.tabTitle;
                tabItem.dataset.lessonId = lesson.id; // Store lesson ID for easy lookup
                tabItem.addEventListener('click', () => setActiveTab(tabItem, index));
                tabNavigation.appendChild(tabItem);
            });

            // Set initial active tab (Situation 1)
            if (lessons.length > 0) {
                const firstTab = tabNavigation.querySelector('.tab-item');
                if (firstTab) {
                    setActiveTab(firstTab, 0);
                }
            }
        });
    </script>
</body>
</html>
